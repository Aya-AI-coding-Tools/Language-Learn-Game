<!doctype html>
<html lang="ja">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>LinguaQuest — 言語冒険RPG</title>
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link
			href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700;900&family=Noto+Sans+JP:wght@300;400;500;700;900&family=Orbitron:wght@400;500;700;900&display=swap"
			rel="stylesheet"
		/>
		<link rel="stylesheet" href="./style.css" />
	</head>
	<body>
		<!-- ========== PARTICLES ========== -->
		<div id="particles"></div>

		<!-- ========== HEADER ========== -->
		<header id="app-header">
			<div class="header-left">
				<h1 class="logo-title">LinguaQuest</h1>
				<span class="logo-subtitle">— 言語冒険RPG —</span>
			</div>
			<div class="header-right">
				<span id="header-level" class="hud-badge">Lv.1</span>
				<span id="header-gold" class="hud-badge gold">💰 0 G</span>
				<span id="header-clock" class="hud-clock"></span>
			</div>
		</header>

		<!-- ========== NAV ========== -->
		<nav id="main-nav">
			<button class="nav-btn active" data-tab="home">🏠 ホーム</button>
			<button class="nav-btn" data-tab="timer">⏱️ タイマー</button>
			<button class="nav-btn" data-tab="calendar">📅 カレンダー</button>
			<button class="nav-btn" data-tab="vocab">📖 単語帳</button>
			<button class="nav-btn" data-tab="review">🔄 復習</button>
			<button class="nav-btn" data-tab="character">🧝 キャラクター</button>
			<button class="nav-btn" data-tab="sphere">🌐 スフィア盤</button>
			<button class="nav-btn" data-tab="report">📊 レポート</button>
		</nav>

		<!-- ========== MAIN SECTIONS ========== -->
		<main id="app-main">
			<section id="tab-home" class="tab-content active"></section>
			<section id="tab-timer" class="tab-content"></section>
			<section id="tab-calendar" class="tab-content"></section>
			<section id="tab-vocab" class="tab-content"></section>
			<section id="tab-review" class="tab-content"></section>
			<section id="tab-character" class="tab-content"></section>
			<section id="tab-sphere" class="tab-content"></section>
			<section id="tab-report" class="tab-content"></section>
		</main>

		<!-- ========== AI TUTOR FLOATING BUTTON ========== -->
		<button id="ai-tutor-toggle" title="AIチューター">🤖</button>

		<!-- ========== AI TUTOR SIDEBAR ========== -->
		<aside id="ai-tutor-sidebar">
			<div class="ai-sidebar-header">
				<h3>🤖 AIチューター</h3>
				<div class="ai-header-controls">
					<select id="ai-lang-select" title="学習言語を選択"></select>
					<button id="ai-settings-btn" title="設定">⚙️</button>
					<button id="ai-close-btn" title="閉じる">✕</button>
				</div>
			</div>
			<div id="ai-chat-messages"></div>
			<div class="ai-input-area">
				<textarea
					id="ai-input"
					placeholder="日本語で質問してください..."
					rows="2"
				></textarea>
				<button id="ai-send-btn">送信</button>
			</div>
			<div id="ai-status" class="ai-status"></div>
		</aside>

		<!-- ========== AI SETTINGS MODAL ========== -->
		<div id="ai-settings-overlay" class="modal-overlay hidden">
			<div class="modal-content ai-settings-modal">
				<h3>🤖 AIチューター設定</h3>

				<label>プロバイダー:</label>
				<select id="ai-provider-select">
					<option value="gemini">Google Gemini（無料）</option>
					<option value="openrouter">OpenRouter（無料枠あり）</option>
					<option value="openai">OpenAI GPT（有料）</option>
					<option value="custom">カスタムエンドポイント</option>
				</select>

				<div id="provider-fields-gemini" class="provider-fields">
					<label>Gemini APIキー:</label>
					<input type="password" id="gemini-api-key" placeholder="AIzaSy..." />
					<small
						><a href="https://aistudio.google.com/apikey" target="_blank"
							>無料キーを取得 →</a
						></small
					>
					<label>モデル:</label>
					<input
						type="text"
						id="gemini-model"
						value="gemini-2.5-flash"
						placeholder="gemini-2.5-flash"
					/>
				</div>

				<div id="provider-fields-openrouter" class="provider-fields hidden">
					<label>OpenRouter APIキー:</label>
					<input
						type="password"
						id="openrouter-api-key"
						placeholder="sk-or-..."
					/>
					<small
						><a href="https://openrouter.ai/keys" target="_blank"
							>キーを取得 →</a
						></small
					>
					<label>モデル:</label>
					<input
						type="text"
						id="openrouter-model"
						value="deepseek/deepseek-r1:free"
						placeholder="deepseek/deepseek-r1:free"
					/>
				</div>

				<div id="provider-fields-openai" class="provider-fields hidden">
					<label>OpenAI APIキー:</label>
					<input type="password" id="openai-api-key" placeholder="sk-..." />
					<label>モデル:</label>
					<input
						type="text"
						id="openai-model"
						value="gpt-4o"
						placeholder="gpt-4o"
					/>
				</div>

				<div id="provider-fields-custom" class="provider-fields hidden">
					<label>エンドポイントURL:</label>
					<input
						type="url"
						id="custom-endpoint"
						placeholder="https://your-api.example.com/v1"
					/>
					<label>APIキー:</label>
					<input type="password" id="custom-api-key" placeholder="sk-..." />
					<label>モデル:</label>
					<input type="text" id="custom-model" placeholder="model-name" />
				</div>

				<h4>📚 学習言語の管理</h4>
				<div id="lang-manager">
					<div id="lang-list"></div>
					<div class="lang-add-row">
						<input
							type="text"
							id="new-lang-code"
							placeholder="コード (例: ko)"
						/>
						<input
							type="text"
							id="new-lang-name"
							placeholder="表示名 (例: 韓国語)"
						/>
						<input
							type="text"
							id="new-lang-flag"
							placeholder="絵文字 (例: 🇰🇷)"
						/>
						<button id="add-lang-btn">追加</button>
					</div>
				</div>

				<div class="modal-buttons">
					<button id="ai-test-btn" class="btn-secondary">接続テスト</button>
					<button id="ai-save-settings-btn" class="btn-primary">保存</button>
					<button id="ai-cancel-settings-btn" class="btn-ghost">
						キャンセル
					</button>
				</div>
				<div id="ai-test-result"></div>
			</div>
		</div>
	</body>

	<script src="./script.js"></script>
</html>
