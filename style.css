/* ============================================================
   LinguaQuest — style.css
   Genshin-inspired dark green + gold accent design
   ============================================================ */

*,
*::before,
*::after {
  margin: 0;
  padding: 0;
  box-sizing: border-box
}

:root {
  /* Background greens */
  --bg: #0c1a0e;
  --bg2: #112117;
  --bg3: #193021;
  --bg4: #22412c;
  /* Text */
  --text: #ede5d0;
  --text2: #b8ad92;
  --text3: #7a7260;
  /* Gold accent (primary) */
  --accent: #d4a843;
  --accent2: #c99a2e;
  --accent3: #b8892a;
  /* Emerald sub-accent */
  --emerald: #3a7d53;
  --emerald2: #2d6344;
  /* Utility colors */
  --gold: #fbbf24;
  --gold2: #f59e0b;
  --green: #6ee7b7;
  --green2: #34d399;
  --red: #f87171;
  --red2: #ef4444;
  --purple: #c4b5fd;
  --pink: #f9a8d4;
  /* Element colors */
  --fire: #ef4444;
  --water: #60a5fa;
  --wind: #67e8f9;
  --earth: #a3e635;
  --thunder: #facc15;
  --ice: #e0f2fe;
  --dark: #a78bfa;
  --holy: #fef3c7;
  --teal: #2dd4bf;
  /* Layout */
  --radius: 12px;
  --radius2: 8px;
  --radius3: 20px;
  --shadow: 0 8px 32px rgba(0, 0, 0, .55);
  --shadow2: 0 4px 20px rgba(0, 0, 0, .35);
  --glass: rgba(17, 33, 23, .82);
  --glass2: rgba(25, 48, 33, .85);
  /* Fonts */
  --font: 'Cinzel Decorative', serif;
  --tr: all .3s cubic-bezier(.4, 0, .2, 1);
}

html {
  font-size: 15px;
  scroll-behavior: smooth
}

body {
  font-family: var(--font);
  color: var(--text);
  background: var(--bg);
  background-image:
    radial-gradient(ellipse at 20% 30%, rgba(58, 125, 83, .12) 0%, transparent 50%),
    radial-gradient(ellipse at 80% 70%, rgba(45, 99, 68, .08) 0%, transparent 50%),
    radial-gradient(ellipse at 50% 50%, rgba(212, 168, 67, .03) 0%, transparent 60%);
  min-height: 100vh;
  overflow-x: hidden;
  line-height: 1.7;
}

/* === Particles === */
#particles {
  position: fixed;
  inset: 0;
  z-index: 0;
  pointer-events: none;
  overflow: hidden
}

.particle {
  position: absolute;
  border-radius: 50%;
  opacity: 0;
  background: var(--accent);
  animation: particleFloat linear infinite;
}

@keyframes particleFloat {
  0% {
    transform: translateY(100vh) scale(.3);
    opacity: 0
  }

  12% {
    opacity: .3
  }

  88% {
    opacity: .3
  }

  100% {
    transform: translateY(-8vh) scale(1);
    opacity: 0
  }
}

/* === Scrollbar === */
::-webkit-scrollbar {
  width: 5px
}

::-webkit-scrollbar-track {
  background: var(--bg)
}

::-webkit-scrollbar-thumb {
  background: var(--bg4);
  border-radius: 4px
}

::-webkit-scrollbar-thumb:hover {
  background: var(--accent)
}

/* === Header === */
.header {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 1000;
  height: 48px;
  background: linear-gradient(180deg, rgba(12, 26, 14, .95), rgba(12, 26, 14, .85));
  backdrop-filter: blur(20px);
  border-bottom: 1px solid rgba(212, 168, 67, .15);
  padding: 0 24px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.logo {
  font-family: var(--font1);
  font-size: 1rem;
  font-weight: 700;
  color: var(--accent);
  letter-spacing: 3px;
  display: flex;
  align-items: center;
  gap: 6px;
}

.logo::before {
  content: '✦';
  font-size: .8rem;
  color: var(--gold)
}

.logo span {
  display: none
}

.clocks {
  display: flex;
  gap: 20px;
  font-family: var(--font2)
}

.clocks div {
  text-align: center
}

.clocks .city {
  font-size: .5rem;
  color: var(--text3);
  display: block;
  letter-spacing: 1.5px;
  text-transform: uppercase
}

.clocks .time {
  font-size: .78rem;
  color: var(--text);
  font-weight: 700;
  letter-spacing: 1px
}

/* === Navigation (inline in header-right style) === */
.nav {
  position: fixed;
  top: 0;
  right: 220px;
  z-index: 1001;
  height: 48px;
  background: transparent;
  border: none;
  display: flex;
  align-items: center;
  gap: 0;
  padding: 0;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}

.nav::-webkit-scrollbar {
  height: 0
}

.nav button {
  background: transparent;
  border: none;
  color: var(--text3);
  cursor: pointer;
  padding: 6px 14px;
  font-size: .72rem;
  height: 48px;
  font-family: var(--font);
  transition: var(--tr);
  white-space: nowrap;
  border-bottom: 2px solid transparent;
  display: flex;
  align-items: center;
  gap: 4px;
}

.nav button:hover {
  color: var(--text)
}

.nav button.active {
  color: var(--accent);
  font-weight: 700;
  border-bottom-color: var(--accent);
}

.nav button::after {
  display: none
}

/* === Main === */
.main {
  margin-top: 56px;
  padding: 32px 40px;
  max-width: 1100px;
  margin-left: auto;
  margin-right: auto;
  position: relative;
  z-index: 1;
  min-height: calc(100vh - 56px);
}

.page {
  display: none;
  animation: pageIn .4s ease
}

.page.active {
  display: block
}

@keyframes pageIn {
  from {
    opacity: 0;
    transform: translateY(12px)
  }

  to {
    opacity: 1;
    transform: translateY(0)
  }
}

/* === Cards === */
.card {
  background: var(--glass2);
  border: 1px solid rgba(212, 168, 67, .12);
  border-radius: var(--radius);
  padding: 24px;
  margin-bottom: 20px;
  backdrop-filter: blur(8px);
  transition: var(--tr);
  position: relative;
  overflow: hidden;
}

.card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(212, 168, 67, .18), transparent);
}

.card:hover {
  border-color: rgba(212, 168, 67, .22);
  box-shadow: 0 4px 24px rgba(212, 168, 67, .05);
}

.card-title {
  font-family: var(--font2);
  font-size: .85rem;
  font-weight: 700;
  color: var(--accent);
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 8px;
  letter-spacing: 1px;
  text-transform: uppercase;
}

.card-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 20px
}

/* === Buttons === */
.btn {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 10px 22px;
  border: none;
  border-radius: var(--radius2);
  font-family: var(--font);
  font-size: .82rem;
  font-weight: 600;
  cursor: pointer;
  transition: var(--tr);
  letter-spacing: .3px;
}

.btn-primary {
  background: linear-gradient(135deg, var(--emerald), var(--emerald2));
  color: var(--text);
  border: 1px solid rgba(212, 168, 67, .2);
  box-shadow: 0 2px 12px rgba(58, 125, 83, .2);
}

.btn-primary:hover {
  box-shadow: 0 4px 24px rgba(58, 125, 83, .35);
  transform: translateY(-2px);
  border-color: rgba(212, 168, 67, .35);
}

.btn-secondary {
  background: var(--bg3);
  color: var(--text2);
  border: 1px solid var(--bg4)
}

.btn-secondary:hover {
  border-color: var(--accent);
  color: var(--accent)
}

.btn-danger {
  background: linear-gradient(135deg, var(--red), var(--red2));
  color: #fff
}

.btn-danger:hover {
  box-shadow: 0 4px 20px rgba(248, 113, 113, .3);
  transform: translateY(-2px)
}

.btn-gold {
  background: linear-gradient(135deg, var(--gold), var(--gold2));
  color: #000;
  font-weight: 700
}

.btn-gold:hover {
  box-shadow: 0 4px 24px rgba(251, 191, 36, .35)
}

.btn-sm {
  padding: 6px 14px;
  font-size: .72rem
}

.btn-lg {
  padding: 14px 30px;
  font-size: 1rem
}

.btn:disabled {
  opacity: .35;
  cursor: not-allowed;
  transform: none !important;
  box-shadow: none !important
}

/* === Progress === */
.progress {
  height: 5px;
  background: var(--bg4);
  border-radius: 3px;
  overflow: hidden;
  margin: 8px 0
}

.progress-bar {
  height: 100%;
  border-radius: 3px;
  transition: width .6s ease;
  background: linear-gradient(90deg, var(--accent3), var(--accent))
}

.progress-bar.gold {
  background: linear-gradient(90deg, var(--gold2), var(--gold))
}

.progress-bar.green {
  background: linear-gradient(90deg, var(--green2), var(--green))
}

.progress-bar.fire {
  background: linear-gradient(90deg, var(--fire), #f97316)
}

.progress-bar.water {
  background: linear-gradient(90deg, var(--water), #38bdf8)
}

.progress-bar.wind {
  background: linear-gradient(90deg, var(--wind), #a5f3fc)
}

.progress-bar.earth {
  background: linear-gradient(90deg, var(--earth), #84cc16)
}

.progress-bar.thunder {
  background: linear-gradient(90deg, var(--thunder), #fde047)
}

.progress-bar.dark {
  background: linear-gradient(90deg, var(--dark), var(--purple))
}

/* === Stats === */
.stat {
  text-align: center;
  padding: 16px
}

.stat-value {
  font-family: var(--font2);
  font-size: 1.8rem;
  font-weight: 900;
  color: var(--accent)
}

.stat-label {
  font-size: .72rem;
  color: var(--text3);
  margin-top: 4px
}

.stat-row {
  display: flex;
  justify-content: space-around;
  flex-wrap: wrap;
  gap: 12px
}

/* === Tags === */
.tag {
  display: inline-block;
  padding: 3px 10px;
  border-radius: 20px;
  font-size: .68rem;
  font-weight: 600
}

.tag-fire {
  background: rgba(239, 68, 68, .12);
  color: var(--fire)
}

.tag-water {
  background: rgba(96, 165, 250, .12);
  color: var(--water)
}

.tag-wind {
  background: rgba(103, 232, 249, .12);
  color: var(--wind)
}

.tag-earth {
  background: rgba(163, 230, 101, .12);
  color: var(--earth)
}

.tag-thunder {
  background: rgba(250, 204, 21, .12);
  color: var(--thunder)
}

.tag-ice {
  background: rgba(224, 242, 254, .12);
  color: var(--ice)
}

.tag-dark {
  background: rgba(167, 139, 250, .12);
  color: var(--dark)
}

.tag-holy {
  background: rgba(254, 243, 199, .12);
  color: var(--gold)
}

.tag-core {
  background: rgba(212, 168, 67, .1);
  color: var(--accent)
}

.tag-uncommon {
  background: rgba(110, 231, 183, .08);
  color: var(--green)
}

.tag-rare {
  background: rgba(196, 181, 253, .08);
  color: var(--purple)
}

.tag-boss {
  background: rgba(239, 68, 68, .15);
  color: var(--red)
}

.tag-treasure {
  background: rgba(251, 191, 36, .12);
  color: var(--gold)
}

.tag-event {
  background: rgba(249, 168, 212, .12);
  color: var(--pink)
}

/* === Rarity === */
.rarity {
  font-size: .72rem;
  letter-spacing: 2px
}

.rarity-1 {
  color: var(--text3)
}

.rarity-2 {
  color: var(--green)
}

.rarity-3 {
  color: var(--accent)
}

.rarity-4 {
  color: var(--purple)
}

.rarity-5 {
  color: var(--gold)
}

/* === Timer === */
.timer-container {
  text-align: center;
  margin: 32px 0
}

.timer-ring {
  position: relative;
  width: 240px;
  height: 240px;
  margin: 0 auto
}

.timer-ring svg {
  width: 100%;
  height: 100%;
  transform: rotate(-90deg)
}

.timer-ring circle {
  fill: none;
  stroke-width: 6
}

.timer-ring .bg {
  stroke: var(--bg4)
}

.timer-ring .fg {
  stroke: var(--accent);
  stroke-linecap: round;
  transition: stroke-dashoffset .5s ease
}

.timer-ring .fg.rest {
  stroke: var(--gold)
}

.timer-display {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center
}

.timer-display .time {
  font-family: var(--font2);
  font-size: 2.6rem;
  font-weight: 900;
  color: var(--text)
}

.timer-display .label {
  font-size: .75rem;
  color: var(--text2);
  margin-top: 6px
}

.timer-display.rest .time {
  color: var(--gold)
}

.timer-controls {
  display: flex;
  justify-content: center;
  gap: 12px;
  margin-top: 24px;
  flex-wrap: wrap
}

/* === Calendar === */
.cal-grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 3px;
  margin-top: 12px
}

.cal-header {
  text-align: center;
  font-size: .68rem;
  color: var(--text3);
  padding: 6px;
  font-weight: 700
}

.cal-cell {
  text-align: center;
  padding: 10px 4px;
  border-radius: var(--radius2);
  font-size: .78rem;
  cursor: default;
  transition: var(--tr);
  min-height: 42px;
  border: 1px solid transparent;
}

.cal-cell.today {
  border-color: var(--accent);
  color: var(--accent);
  font-weight: 700
}

.cal-cell.studied {
  background: rgba(212, 168, 67, .1);
  color: var(--accent)
}

.cal-cell.studied-heavy {
  background: rgba(212, 168, 67, .22);
  color: var(--text);
  font-weight: 700
}

.cal-cell.empty {
  opacity: .15
}

.cal-cell.other-month {
  opacity: .25
}

.cal-cell.selected {
  background: var(--bg4);
  border-color: var(--accent)
}

.cal-cell:not(.empty):not(.other-month):hover {
  background: rgba(212, 168, 67, .05);
  cursor: pointer
}

/* === Vocab === */
.vocab-tabs {
  display: flex;
  gap: 8px;
  margin-bottom: 18px
}

.vocab-tabs button {
  padding: 8px 22px;
  border: 1px solid var(--bg4);
  background: transparent;
  color: var(--text2);
  border-radius: var(--radius2);
  cursor: pointer;
  font-family: var(--font);
  transition: var(--tr);
  font-size: .8rem;
}

.vocab-tabs button.active {
  background: var(--emerald);
  color: var(--text);
  border-color: var(--emerald)
}

.vocab-list {
  max-height: 520px;
  overflow-y: auto;
  padding-right: 8px
}

.vocab-item {
  display: flex;
  align-items: center;
  gap: 14px;
  padding: 14px;
  border-radius: var(--radius2);
  border: 1px solid rgba(212, 168, 67, .05);
  margin-bottom: 8px;
  transition: var(--tr);
}

.vocab-item:hover {
  background: rgba(212, 168, 67, .04);
  border-color: rgba(212, 168, 67, .15)
}

.vocab-img {
  width: 48px;
  height: 48px;
  border-radius: 8px;
  object-fit: cover;
  background: var(--bg4);
  flex-shrink: 0
}

.vocab-info {
  flex: 1;
  min-width: 0
}

.vocab-word {
  font-weight: 700;
  font-size: .95rem;
  color: var(--text)
}

.vocab-meaning {
  font-size: .78rem;
  color: var(--text2)
}

.vocab-meta {
  font-size: .68rem;
  color: var(--text3);
  margin-top: 2px
}

.vocab-actions {
  display: flex;
  gap: 4px;
  flex-shrink: 0
}

.vocab-empty {
  text-align: center;
  padding: 48px;
  color: var(--text3);
  font-size: .88rem
}

/* === Flashcard === */
.flashcard {
  width: 100%;
  max-width: 420px;
  margin: 32px auto;
  perspective: 1000px;
  cursor: pointer
}

.flashcard-inner {
  position: relative;
  height: 280px;
  transition: transform .6s;
  transform-style: preserve-3d
}

.flashcard-inner.flipped {
  transform: rotateY(180deg)
}

.flashcard-front,
.flashcard-back {
  position: absolute;
  inset: 0;
  backface-visibility: hidden;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  border-radius: var(--radius);
  padding: 28px;
  text-align: center;
}

.flashcard-front {
  background: linear-gradient(145deg, var(--bg3), var(--bg4));
  border: 1px solid rgba(212, 168, 67, .15);
}

.flashcard-back {
  background: linear-gradient(145deg, rgba(212, 168, 67, .06), rgba(58, 125, 83, .08));
  border: 1px solid rgba(212, 168, 67, .25);
  transform: rotateY(180deg);
}

.flashcard-word {
  font-size: 2rem;
  font-weight: 900;
  color: var(--text)
}

.flashcard-pron {
  font-size: .95rem;
  color: var(--accent);
  margin-top: 8px
}

.flashcard-meaning {
  font-size: 1.4rem;
  font-weight: 700;
  color: var(--gold)
}

.flashcard-example {
  font-size: .82rem;
  color: var(--text2);
  margin-top: 12px;
  line-height: 1.6
}

.review-buttons {
  display: flex;
  justify-content: center;
  gap: 10px;
  margin-top: 24px;
  flex-wrap: wrap
}

.review-complete {
  text-align: center;
  padding: 48px;
  color: var(--green);
  font-size: 1.1rem;
  font-weight: 600
}

/* === Character === */
.char-filters {
  display: flex;
  gap: 6px;
  margin-bottom: 14px;
  flex-wrap: wrap
}

.char-filters button {
  padding: 5px 14px;
  border: 1px solid var(--bg4);
  background: transparent;
  color: var(--text3);
  border-radius: 20px;
  cursor: pointer;
  font-size: .68rem;
  font-family: var(--font);
  transition: var(--tr);
}

.char-filters button.active {
  background: var(--emerald);
  color: var(--text);
  border-color: var(--emerald)
}

.char-filters button:hover {
  border-color: var(--accent);
  color: var(--accent)
}

.char-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
  gap: 10px
}

.char-card {
  text-align: center;
  padding: 14px 10px;
  border-radius: var(--radius);
  border: 1px solid rgba(212, 168, 67, .08);
  cursor: pointer;
  transition: var(--tr);
  background: var(--bg2);
  position: relative;
  overflow: hidden;
}

.char-card::before {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at 50% 0%, rgba(212, 168, 67, .04), transparent 70%);
  opacity: 0;
  transition: var(--tr);
}

.char-card:hover {
  border-color: rgba(212, 168, 67, .25);
  transform: translateY(-3px);
  box-shadow: 0 4px 16px rgba(212, 168, 67, .08);
}

.char-card:hover::before {
  opacity: 1
}

.char-card.selected {
  border-color: var(--gold);
  box-shadow: 0 0 20px rgba(251, 191, 36, .12), 0 0 40px rgba(251, 191, 36, .04);
}

.char-card .icon {
  font-size: 2.2rem;
  margin-bottom: 6px;
  position: relative;
  z-index: 1
}

.char-card .name {
  font-size: .72rem;
  font-weight: 700;
  color: var(--text);
  position: relative;
  z-index: 1
}

.char-card .desc {
  font-size: .55rem;
  color: var(--text3);
  margin-top: 3px;
  line-height: 1.4;
  position: relative;
  z-index: 1
}

.char-card .cat-badge {
  position: absolute;
  top: 5px;
  right: 5px;
  font-size: .48rem;
  padding: 2px 6px;
  border-radius: 10px;
  font-weight: 700;
  z-index: 2;
}

.char-card .cat-badge.core {
  background: rgba(212, 168, 67, .12);
  color: var(--accent)
}

.char-card .cat-badge.uncommon {
  background: rgba(110, 231, 183, .1);
  color: var(--green)
}

.char-card .cat-badge.rare {
  background: rgba(196, 181, 253, .1);
  color: var(--purple)
}

.char-card .cat-badge.martial {
  background: rgba(239, 68, 68, .1);
  color: var(--fire)
}

.char-card .cat-badge.caster {
  background: rgba(96, 165, 250, .1);
  color: var(--water)
}

.char-card .cat-badge.hybrid {
  background: rgba(249, 168, 212, .1);
  color: var(--pink)
}

.heritage-item {
  padding: 12px 14px;
  border: 1px solid rgba(212, 168, 67, .06);
  border-radius: var(--radius2);
  margin-bottom: 8px;
  cursor: pointer;
  transition: var(--tr);
  text-align: left;
}

.heritage-item:hover {
  border-color: rgba(212, 168, 67, .2);
  background: rgba(212, 168, 67, .03)
}

.heritage-item.selected {
  border-color: var(--gold);
  background: rgba(251, 191, 36, .04)
}

.heritage-item .h-name {
  font-size: .8rem;
  font-weight: 700;
  color: var(--text)
}

.heritage-item .h-desc {
  font-size: .7rem;
  color: var(--text2);
  margin-top: 2px
}

.synergy-table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 14px
}

.synergy-table th,
.synergy-table td {
  padding: 10px 14px;
  text-align: center;
  font-size: .78rem;
  border-bottom: 1px solid rgba(212, 168, 67, .06);
}

.synergy-table th {
  color: var(--text3);
  font-weight: 600;
  font-size: .68rem;
  letter-spacing: .5px
}

.synergy-table .positive {
  color: var(--green);
  font-weight: 700
}

.synergy-table .negative {
  color: var(--red);
  font-weight: 700
}

.synergy-table .neutral {
  color: var(--text3)
}

/* === Sphere Grid === */
.sphere-container {
  position: relative;
  width: 100%;
  height: 680px;
  background:
    radial-gradient(ellipse at 30% 40%, rgba(58, 125, 83, .06) 0%, transparent 50%),
    radial-gradient(ellipse at 70% 60%, rgba(212, 168, 67, .03) 0%, transparent 50%);
  border: 1px solid rgba(212, 168, 67, .08);
  border-radius: var(--radius);
  overflow: hidden;
  cursor: grab;
}

.sphere-container:active {
  cursor: grabbing
}

.sphere-canvas {
  position: absolute;
  top: 0;
  left: 0
}

.sphere-controls {
  display: flex;
  gap: 8px;
  margin-bottom: 14px;
  flex-wrap: wrap;
  align-items: center
}

.sphere-info {
  position: absolute;
  bottom: 12px;
  left: 12px;
  right: 12px;
  background: var(--glass2);
  backdrop-filter: blur(16px);
  border: 1px solid rgba(212, 168, 67, .15);
  border-radius: var(--radius);
  padding: 16px;
  display: none;
  z-index: 10;
}

.sphere-info.show {
  display: block;
  animation: pageIn .3s ease
}

.sphere-legend {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
  margin-bottom: 12px
}

.sphere-legend span {
  font-size: .68rem;
  display: flex;
  align-items: center;
  gap: 5px;
  color: var(--text2)
}

.sphere-legend .dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  display: inline-block
}

/* === Node Tooltip === */
.node-tooltip {
  position: fixed;
  z-index: 2000;
  background: var(--bg2);
  border: 1px solid rgba(212, 168, 67, .3);
  border-radius: var(--radius2);
  padding: 14px 18px;
  max-width: 300px;
  box-shadow: var(--shadow);
  display: none;
  pointer-events: none;
  backdrop-filter: blur(8px);
}

.node-tooltip.show {
  display: block
}

.node-tooltip .n-name {
  font-weight: 700;
  font-size: .88rem;
  color: var(--accent)
}

.node-tooltip .n-desc {
  font-size: .72rem;
  color: var(--text2);
  margin: 5px 0;
  line-height: 1.5
}

.node-tooltip .n-cost {
  font-size: .72rem;
  color: var(--gold)
}

.node-tooltip .n-rarity {
  margin-top: 4px
}

.node-tooltip .n-element {
  font-size: .68rem;
  margin-top: 3px
}

.node-tooltip .n-type {
  font-size: .68rem;
  margin-top: 3px;
  font-weight: 600
}

/* === Report === */
.report-period {
  display: flex;
  gap: 8px;
  margin-bottom: 22px
}

.report-period button.active {
  background: var(--emerald);
  color: var(--text);
  border-color: var(--emerald)
}

.report-bar {
  display: flex;
  align-items: end;
  gap: 5px;
  height: 200px;
  padding: 0 8px
}

.report-bar-item {
  flex: 1;
  border-radius: 4px 4px 0 0;
  min-width: 14px;
  transition: height .6s ease;
  position: relative;
  background: linear-gradient(0deg, var(--accent3), var(--accent));
}

.report-bar-item .bar-label {
  position: absolute;
  bottom: -22px;
  left: 50%;
  transform: translateX(-50%);
  font-size: .55rem;
  color: var(--text3);
  white-space: nowrap;
}

.report-bar-item .bar-value {
  position: absolute;
  top: -20px;
  left: 50%;
  transform: translateX(-50%);
  font-size: .6rem;
  color: var(--accent);
  font-weight: 700;
}

.report-stat-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: 14px
}

.report-stat-card {
  text-align: center;
  padding: 18px;
  background: var(--bg3);
  border-radius: var(--radius2)
}

.report-stat-card .val {
  font-family: var(--font2);
  font-size: 1.5rem;
  font-weight: 900;
  color: var(--accent)
}

.report-stat-card .lbl {
  font-size: .68rem;
  color: var(--text3);
  margin-top: 4px
}

.achievement-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px;
  border-radius: var(--radius2);
  margin-bottom: 8px;
  background: var(--bg3);
  transition: var(--tr);
}

.achievement-item:hover {
  background: var(--bg4)
}

.achievement-item .a-icon {
  font-size: 1.6rem
}

.achievement-item .a-name {
  font-size: .82rem;
  font-weight: 700;
  color: var(--text)
}

.achievement-item .a-desc {
  font-size: .68rem;
  color: var(--text2)
}

.achievement-item.locked {
  opacity: .35
}

.achievement-item.unlocked {
  border-left: 3px solid var(--gold)
}

/* === Modals === */
.modal-overlay {
  position: fixed;
  inset: 0;
  z-index: 3000;
  background: rgba(0, 0, 0, .6);
  backdrop-filter: blur(6px);
  display: none;
  align-items: center;
  justify-content: center;
}

.modal-overlay.show {
  display: flex
}

.modal {
  background: var(--bg2);
  border: 1px solid rgba(212, 168, 67, .15);
  border-radius: var(--radius3);
  padding: 32px;
  max-width: 520px;
  width: 92%;
  max-height: 82vh;
  overflow-y: auto;
  animation: pageIn .35s ease;
  box-shadow: var(--shadow);
}

.modal h3 {
  font-family: var(--font2);
  color: var(--accent);
  margin-bottom: 18px;
  font-size: .92rem;
  letter-spacing: 1px
}

.modal p {
  font-size: .82rem;
  color: var(--text2);
  margin-bottom: 14px;
  line-height: 1.7
}

.modal .boss-question {
  font-size: 1rem;
  font-weight: 700;
  color: var(--text);
  margin: 18px 0;
  padding: 18px;
  background: var(--bg3);
  border-radius: var(--radius2);
  border-left: 4px solid var(--red);
}

.modal .boss-options {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin: 14px 0
}

.modal .boss-option {
  padding: 14px;
  background: var(--bg3);
  border: 1px solid var(--bg4);
  border-radius: var(--radius2);
  cursor: pointer;
  transition: var(--tr);
  font-size: .82rem;
  text-align: left;
  color: var(--text);
  font-family: var(--font);
}

.modal .boss-option:hover {
  border-color: var(--red);
  background: rgba(239, 68, 68, .04)
}

.modal .event-choices {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin: 14px 0
}

.modal .event-choice {
  padding: 14px;
  background: var(--bg3);
  border: 1px solid var(--bg4);
  border-radius: var(--radius2);
  cursor: pointer;
  transition: var(--tr);
  font-size: .82rem;
  text-align: left;
  color: var(--text);
  font-family: var(--font);
}

.modal .event-choice:hover {
  border-color: var(--purple);
  background: rgba(167, 139, 250, .04)
}

.modal .result-success {
  color: var(--green);
  font-weight: 700;
  font-size: 1rem;
  margin: 14px 0
}

.modal .result-fail {
  color: var(--red);
  font-weight: 700;
  font-size: 1rem;
  margin: 14px 0
}

/* === Forms === */
.form-group {
  margin-bottom: 18px
}

.form-group label {
  display: block;
  font-size: .78rem;
  color: var(--text2);
  margin-bottom: 6px
}

.form-group input,
.form-group select,
.form-group textarea {
  width: 100%;
  padding: 11px 16px;
  background: var(--bg3);
  border: 1px solid var(--bg4);
  border-radius: var(--radius2);
  color: var(--text);
  font-family: var(--font);
  font-size: .82rem;
  transition: var(--tr);
}

.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus {
  outline: none;
  border-color: var(--accent);
  box-shadow: 0 0 14px rgba(212, 168, 67, .1);
}

.form-group textarea {
  resize: vertical;
  min-height: 64px
}

/* === Animations === */
.glow {
  animation: glow 2s ease-in-out infinite alternate
}

@keyframes glow {
  from {
    box-shadow: 0 0 6px var(--accent)
  }

  to {
    box-shadow: 0 0 24px var(--accent), 0 0 48px rgba(212, 168, 67, .15)
  }
}

.pulse {
  animation: pulse 1.5s ease-in-out infinite
}

@keyframes pulse {

  0%,
  100% {
    transform: scale(1)
  }

  50% {
    transform: scale(1.05)
  }
}

.shake {
  animation: shake .5s ease
}

@keyframes shake {

  0%,
  100% {
    transform: translateX(0)
  }

  25% {
    transform: translateX(-5px)
  }

  75% {
    transform: translateX(5px)
  }
}

.sparkle {
  animation: sparkle .8s ease forwards
}

@keyframes sparkle {
  0% {
    opacity: 0;
    transform: scale(.4) rotate(-12deg)
  }

  50% {
    opacity: 1;
    transform: scale(1.12) rotate(4deg)
  }

  100% {
    opacity: 1;
    transform: scale(1) rotate(0)
  }
}

.boss-glow {
  animation: bossGlow 2s ease-in-out infinite alternate
}

@keyframes bossGlow {
  from {
    box-shadow: 0 0 12px var(--red)
  }

  to {
    box-shadow: 0 0 36px var(--red), 0 0 72px rgba(239, 68, 68, .25)
  }
}

.treasure-glow {
  animation: treasureGlow 2s ease-in-out infinite alternate
}

@keyframes treasureGlow {
  from {
    box-shadow: 0 0 12px var(--gold)
  }

  to {
    box-shadow: 0 0 36px var(--gold), 0 0 72px rgba(251, 191, 36, .25)
  }
}

.event-glow {
  animation: eventGlow 2s ease-in-out infinite alternate
}

@keyframes eventGlow {
  from {
    box-shadow: 0 0 12px var(--purple)
  }

  to {
    box-shadow: 0 0 36px var(--purple), 0 0 72px rgba(167, 139, 250, .25)
  }
}

.level-up {
  animation: levelUp 1.2s ease forwards
}

@keyframes levelUp {
  0% {
    transform: scale(1);
    filter: brightness(1)
  }

  40% {
    transform: scale(1.2);
    filter: brightness(1.5) saturate(1.4)
  }

  100% {
    transform: scale(1);
    filter: brightness(1)
  }
}

.node-unlock {
  animation: nodeUnlock .7s cubic-bezier(.34, 1.56, .64, 1) forwards
}

@keyframes nodeUnlock {
  0% {
    transform: scale(0);
    opacity: 0
  }

  100% {
    transform: scale(1);
    opacity: 1
  }
}

/* === Responsive === */
@media(max-width:1024px) {
  .nav {
    position: fixed;
    top: 48px;
    left: 0;
    right: 0;
    height: auto;
    justify-content: center;
    padding: 6px 10px;
    background: var(--glass);
    backdrop-filter: blur(18px);
    border-bottom: 1px solid rgba(212, 168, 67, .08);
    flex-wrap: nowrap;
    overflow-x: auto;
  }

  .nav button {
    height: auto;
    padding: 7px 12px;
    border-bottom: none
  }

  .nav button.active {
    background: rgba(212, 168, 67, .1);
    border-radius: var(--radius2)
  }

  .main {
    margin-top: 96px;
    padding: 20px
  }
}

@media(max-width:768px) {
  html {
    font-size: 13px
  }

  .header {
    padding: 0 14px;
    height: 44px
  }

  .logo {
    font-size: .88rem;
    letter-spacing: 2px
  }

  .logo::before {
    font-size: .65rem
  }

  .clocks {
    gap: 10px
  }

  .clocks .time {
    font-size: .7rem
  }

  .nav button {
    padding: 6px 10px;
    font-size: .68rem
  }

  .main {
    margin-top: 88px;
    padding: 14px
  }

  .card {
    padding: 18px;
    border-radius: 10px
  }

  .card-grid {
    grid-template-columns: 1fr
  }

  .stat-value {
    font-size: 1.4rem
  }

  .timer-ring {
    width: 200px;
    height: 200px
  }

  .timer-display .time {
    font-size: 2rem
  }

  .sphere-container {
    height: 460px
  }

  .char-grid {
    grid-template-columns: repeat(auto-fill, minmax(120px, 1fr))
  }

  .report-bar {
    height: 150px
  }
}

@media(max-width:480px) {
  html {
    font-size: 12px
  }

  .header {
    padding: 0 10px;
    height: 40px
  }

  .logo {
    font-size: .8rem;
    letter-spacing: 1.5px
  }

  .clocks {
    gap: 6px
  }

  .clocks .city {
    font-size: .45rem
  }

  .clocks .time {
    font-size: .58rem
  }

  .main {
    margin-top: 82px;
    padding: 10px
  }

  .card {
    padding: 14px
  }

  .vocab-item {
    flex-direction: column;
    text-align: center;
    gap: 8px
  }

  .sphere-container {
    height: 360px
  }

  .char-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 8px
  }

  .char-card {
    padding: 10px 8px
  }

  .char-card .icon {
    font-size: 1.8rem
  }

  .flashcard-inner {
    height: 240px
  }

  .flashcard-word {
    font-size: 1.5rem
  }

  .modal {
    padding: 22px;
    border-radius: 14px
  }

  .report-bar {
    height: 120px
  }
}
